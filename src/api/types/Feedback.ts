// This file was auto-generated by Fern from our API Definition.

import type * as Scout from "../index.js";

/**
 * Feedback entity stored in PostgreSQL.
 *
 * Represents human feedback on AI system outputs (workflow runs, copilot messages, etc.)
 */
export interface Feedback {
    /** Unique feedback ID (fb_*) */
    id: string;
    /** Type of target being reviewed */
    target_type: Feedback.TargetType;
    /** ID of the target entity */
    target_id: string;
    /** ID of the HumanReviewScorer template used */
    scorer_id: string;
    /** Type of user providing feedback */
    user_type?: Feedback.UserType;
    /** Internal Scout user ID (from JWT) */
    created_by?: string;
    /** External customer user ID */
    external_user_id?: string;
    /** Segment-style traits */
    external_user_metadata?: Record<string, unknown>;
    /** Numeric score (0-1) for continuous/categorical */
    score?: number;
    /** Selected option label for categorical */
    selected_option?: string;
    /** Optional text comment/feedback */
    comment?: string;
    /** Correction data (for future use) */
    correction?: unknown;
    /** Target-specific metadata, validated based on target_type */
    metadata: Feedback.Metadata;
    /** Current status of the feedback */
    status?: Feedback.Status;
    /** Priority level for addressing this feedback */
    priority?: Feedback.Priority;
    /** User ID of team member assigned to this feedback */
    assigned_to?: string;
    /** Internal team notes (not visible to external users) */
    internal_notes?: string;
    /** Timestamp when feedback was marked as resolved */
    resolved_at?: string;
    /** User ID who resolved the feedback */
    resolved_by?: string;
    /** Organization that owns this feedback */
    organization_id: string;
    /** When feedback was created */
    created_at: string;
    /** When feedback was last updated */
    updated_at: string;
}

export namespace Feedback {
    /** Type of target being reviewed */
    export const TargetType = {
        WorkflowRun: "workflow_run",
        CopilotMessage: "copilot_message",
        AgentSession: "agent_session",
        Span: "span",
        Trace: "trace",
    } as const;
    export type TargetType = (typeof TargetType)[keyof typeof TargetType];
    /** Type of user providing feedback */
    export const UserType = {
        Internal: "internal",
        External: "external",
        Anonymous: "anonymous",
    } as const;
    export type UserType = (typeof UserType)[keyof typeof UserType];
    /**
     * Target-specific metadata, validated based on target_type
     */
    export type Metadata = Scout.GenericFeedbackMetadata | Scout.WorkflowRunFeedbackMetadata;
    /** Current status of the feedback */
    export const Status = {
        New: "new",
        Open: "open",
        InProgress: "in_progress",
        Resolved: "resolved",
        Closed: "closed",
        WontFix: "wont_fix",
    } as const;
    export type Status = (typeof Status)[keyof typeof Status];
    /** Priority level for addressing this feedback */
    export const Priority = {
        Low: "low",
        Medium: "medium",
        High: "high",
        Critical: "critical",
    } as const;
    export type Priority = (typeof Priority)[keyof typeof Priority];
}
